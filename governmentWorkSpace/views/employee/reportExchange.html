<style>
	.w-e-text-container{
    height: 540px !important;
}
</style>
<form class="layui-form layui-form-pane" lay-filter="formTest" action="">
	<fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
		<legend>报告交流</legend>
	</fieldset>

	<div style="margin-left: 40px;margin-right: 40px;">
		<!-- 分成两个部分的栅格系统 -->
		<div class="layui-row">

			<div class="layui-col-xs6">

				<div class="layui-form-item" pane>
					<label class="layui-form-label">项目主题:</label>
					<div class="layui-input-block">
						<input type="text" name="title" required lay-verify="required" placeholder="请输入项目主题" autocomplete="off" class="layui-input">
					</div>
				</div>
				<div class="layui-form-item" pane>
					<label class="layui-form-label">收件人:</label>  
					<div class="layui-input-block">
						<input type="checkbox" name="manager[li]" title="李领导">
						<input type="checkbox" name="manager[mao]" title="毛领导" >
						<input type="checkbox" name="manager[hu]" title="胡领导">
					</div>
				</div>
			</div>
			<div class="layui-col-xs6">

				<div class="layui-form-item" pane>
					<label class="layui-form-label">项目类别:</label>
					<div class="layui-input-block">
						<select name="city" lay-verify="required">
							<option value=""></option>
							<option value="0">北京</option>
							<option value="1">上海</option>
							<option value="2">广州</option>
							<option value="3">深圳</option>
							<option value="4">杭州</option>
						</select>
					</div>
				</div>
				<div class="layui-form-item" pane>
					<label class="layui-form-label">是否:</label>
					<div class="layui-input-block">
						<input type="radio" name="sex" value="男" title="男">
						<input type="radio" name="sex" value="女" title="女" checked>
					</div>
				</div>
			</div>
		</div>
		<div class="layui-form-item" pane>
			<label class="layui-form-label">项目概述:</label>
			<div class="layui-input-block">
				<input type="text" name="introduction" required lay-verify="required" placeholder="请简述介绍项目" autocomplete="off"
				 class="layui-input">
			</div>
		</div>
		<!-- 分成两个部分的栅格系统 -->
		<div class="layui-row">

			<div class="layui-col-xs6">
				<!-- 这是编辑器 -->
				<div id="editor"></div>
			</div>
			<div class="layui-col-xs6">
				<!-- 这是预览器 -->
				<div id="editorLook" style="pointer-events: none;"></div>
			</div>
		</div>
		<br>
		<center>
			<button class="layui-btn layui-btn-normal" type="button" onclick="aheadLook()">右侧预览</button>
			<button class="layui-btn layui-btn-warm" type="button">保存到草稿箱</button>
			<button class="layui-btn" lay-submit lay-filter="formDemo">立即提交</button>
		</center>
	</div>
</form>

<link rel="stylesheet" href="../../utils/layui/css/layui.css">
<script src="../../utils/wangEditor/release/wangEditor.js"></script>
<script src="../../utils/layui/layui.js"></script>
<script>
	//用JS获取地址栏参数的方法
	function GetQueryString(name) {
		var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
		var r = window.location.search.substr(1).match(reg); //search,查询？后面的参数，并匹配正则
		if (r != null) return decodeURI(r[2]);
		return null;
	}
	console.log(GetQueryString("title"));
	console.log(GetQueryString("introduction"));

	var E = window.wangEditor;
	var editor = new E('#editor');
	// 自定义菜单配置
	editor.customConfig.menus = [
		'head', // 标题
		'bold', // 粗体
		'fontSize', // 字号
		'fontName', // 字体
		'italic', // 斜体
		'underline', // 下划线
		'strikeThrough', // 删除线
		'foreColor', // 文字颜色
		'backColor', // 背景颜色
		'link', // 插入链接
		'list', // 列表
		'justify', // 对齐方式
		'quote', // 引用
		'emoticon', // 表情
		'image', // 插入图片
		'table', // 表格
		'undo', // 撤销
		'redo' // 重复
	]
	editor.create();
	

	var F = window.wangEditor;
	var editorLook = new F('#editorLook');
	// 自定义菜单配置
	editorLook.customConfig.menus = ['emoticon']
	editorLook.create();
	editorLook.$textElem.attr('contenteditable', false); // 禁用编辑功能

	function aheadLook() {
		editorLook.txt.html(editor.txt.html());
	}
	//layui.JavaScript代码区域
	layui.use(['element', 'form'], function() {
		var element = layui.element;

		var form = layui.form;
		
		//表单初始化
		if(GetQueryString("title") != null ){
			form.val("formTest", { 
				"title": GetQueryString("title") ,
				"introduction" : GetQueryString("introduction"),
				"sex": "男",
				"city": 0,
				"manager[li]": true,
			});
			editorLook.txt.html(GetQueryString("context"));
			editor.txt.html(GetQueryString("context"));
		}
		
		//监听提交
		form.on('submit(formDemo)', function(data) {
			layer.msg(JSON.stringify(data.field));
			return false;
		});
	});
</script>
